<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>EcoCropx - Crop Suggestion</title>
  <style>
    .navbar {
  width: 20%;
  background-color: linear-gradient(135deg, var(--primary), var(--primary-dark));
  padding: 5px 24px;
  position: absolute;
  top: 0;
  left: 0;
  display: flex;

}


.nav-link {
  color: white;
  font-size: 1rem;
  text-decoration: none;
  font-weight: 600;
  transition: color 0.3s ease, transform 0.2s ease;
}

.nav-link:hover {
  color: var(--primary-light);
  transform: scale(1.1);
}

    :root {
      --primary: #10b981;
      --primary-light: #d1fae5;
      --primary-dark: #059669;
      --gray-50: #f9fafb;
      --gray-100: #f3f4f6;
      --gray-200: #e5e7eb;
      --gray-300: #d1d5db;
      --gray-400: #9ca3af;
      --gray-500: #6b7280;
      --gray-600: #4b5563;
      --gray-700: #374151;
      --gray-800: #1f2937;
      --gray-900: #111827;
      --error: #ef4444;
      --success: #10b981;
      --warning: #f59e0b;
    }
    
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      font-family: 'Inter', system-ui, -apple-system, sans-serif;
    }
    
    body {
      background-color: var(--gray-100);
      color: var(--gray-800);
      min-height: 100vh;
      display: flex;
      justify-content: center;
      align-items: center;
      padding: 20px;
      line-height: 1.5;
    }
    
    .app-container {
      width: 100%;
      max-width: 800px;
      background-color: white;
      border-radius: 16px;
      box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
      overflow: hidden;
      position: relative;
    }
    
    .app-header {
      background: linear-gradient(135deg, var(--primary), var(--primary-dark));
      padding: 24px;
      color: white;
      text-align: center;
      position: relative;
    }
    
    .app-header::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-image: url("data:image/svg+xml,%3Csvg width='100' height='100' viewBox='0 0 100 100' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M11 18c3.866 0 7-3.134 7-7s-3.134-7-7-7-7 3.134-7 7 3.134 7 7 7zm48 25c3.866 0 7-3.134 7-7s-3.134-7-7-7-7 3.134-7 7 3.134 7 7 7zm-43-7c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zm63 31c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zM34 90c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zm56-76c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zM12 86c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm28-65c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm23-11c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zm-6 60c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm29 22c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zM32 63c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zm57-13c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zm-9-21c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2zM60 91c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2zM35 41c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2zM12 60c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2z' fill='%23ffffff' fill-opacity='0.1' fill-rule='evenodd'/%3E%3C/svg%3E");
      opacity: 0.2;
    }
    
    .app-title {
      font-size: 1.8rem;
      font-weight: 700;
      margin-bottom: 8px;
      padding-top: -5%;
    }
    
    .app-subtitle {
      font-size: 1rem;
      opacity: 0.9;
      font-weight: 400;
    }
    
    .form-container {
      padding: 24px;
    }
    
    .card {
      background: white;
      border-radius: 12px;
      margin-bottom: 24px;
    }
    
    .card-header {
      padding: 16px 24px;
      border-bottom: 1px solid var(--gray-200);
      display: flex;
      align-items: center;
      gap: 12px;
    }
    
    .card-title {
      font-size: 1.1rem;
      font-weight: 600;
      color: var(--gray-800);
    }
    
    .card-icon {
      background: var(--primary-light);
      width: 32px;
      height: 32px;
      border-radius: 8px;
      display: flex;
      align-items: center;
      justify-content: center;
      color: var(--primary);
    }
    
    .card-body {
      padding: 24px;
    }
    
    .form-grid {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 20px;
    }
    
    .form-group {
      margin-bottom: 16px;
    }
    
    .form-group.full-width {
      grid-column: span 2;
    }
    
    label {
      display: block;
      margin-bottom: 8px;
      font-size: 0.9rem;
      font-weight: 500;
      color: var(--gray-700);
    }
    
    input {
      width: 100%;
      padding: 12px 16px;
      border: 1px solid var(--gray-300);
      border-radius: 8px;
      font-size: 1rem;
      transition: all 0.2s ease;
      color: var(--gray-800);
      background-color: white;
    }
    
    input:focus {
      outline: none;
      border-color: var(--primary);
      box-shadow: 0 0 0 3px rgba(16, 185, 129, 0.1);
    }
    
    input::placeholder {
      color: var(--gray-400);
    }
    
    .input-with-icon {
      position: relative;
    }
    
    .input-with-icon input {
      padding-left: 40px;
    }
    
    .input-icon {
      position: absolute;
      left: 12px;
      top: 50%;
      transform: translateY(-50%);
      color: var(--gray-400);
    }
    
    .button {
      display: inline-block;
      padding: 14px 24px;
      background-color: var(--primary);
      color: white;
      border: none;
      border-radius: 8px;
      font-size: 1rem;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.2s ease;
      text-align: center;
      box-shadow: 0 4px 6px rgba(16, 185, 129, 0.2);
    }
    
    .button:hover {
      background-color: var(--primary-dark);
      transform: translateY(-1px);
      box-shadow: 0 6px 8px rgba(16, 185, 129, 0.3);
    }
    
    .button:active {
      transform: translateY(0);
      box-shadow: 0 2px 4px rgba(16, 185, 129, 0.2);
    }
    
    .button-container {
      display: flex;
      justify-content: center;
      margin-top: 24px;
    }
    
    .button-container .button {
      min-width: 200px;
    }
    
    .result-container {
      margin-top: 24px;
      padding: 24px;
      border-radius: 12px;
      background-color: var(--primary-light);
      border: 1px solid var(--primary);
      text-align: center;
      display: none;
    }
    
    .result-container.visible {
      display: block;
      animation: fadeIn 0.5s ease;
    }
    
    .result-title {
      font-size: 1.2rem;
      font-weight: 600;
      color: var(--primary-dark);
      margin-bottom: 8px;
    }
    
    .result-value {
      font-size: 1.5rem;
      font-weight: 700;
      color: var(--primary-dark);
    }
    
    .loading {
      display: none;
      text-align: center;
      padding: 20px;
    }
    
    .loading.visible {
      display: block;
    }
    
    .spinner {
      width: 40px;
      height: 40px;
      border: 4px solid rgba(16, 185, 129, 0.1);
      border-radius: 50%;
      border-top: 4px solid var(--primary);
      animation: spin 1s linear infinite;
      margin: 0 auto 16px;
    }
    
    @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }
    
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(10px); }
      to { opacity: 1; transform: translateY(0); }
    }
    
    .tooltip {
      display: inline-block;
      position: relative;
      margin-left: 6px;
      cursor: help;
    }
    
    .tooltip-icon {
      width: 16px;
      height: 16px;
      background-color: var(--gray-300);
      color: white;
      border-radius: 50%;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      font-size: 12px;
      font-weight: bold;
    }
    
    .tooltip-content {
      position: absolute;
      bottom: 100%;
      left: 50%;
      transform: translateX(-50%);
      background-color: var(--gray-800);
      color: white;
      padding: 8px 12px;
      border-radius: 6px;
      font-size: 0.8rem;
      width: 200px;
      z-index: 10;
      box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
      opacity: 0;
      visibility: hidden;
      transition: all 0.2s ease;
    }
    
    .tooltip-content::after {
      content: '';
      position: absolute;
      top: 100%;
      left: 50%;
      transform: translateX(-50%);
      border-width: 6px;
      border-style: solid;
      border-color: var(--gray-800) transparent transparent transparent;
    }
    
    .tooltip:hover .tooltip-content {
      opacity: 1;
      visibility: visible;
      bottom: calc(100% + 10px);
    }
    
    .logo {
      width: 40px;
      height: 40px;
      margin-right: 12px;
      margin-bottom: 12px;
    }
    
    @media (max-width: 768px) {
      .form-grid {
        grid-template-columns: 1fr;
      }
      
      .form-group.full-width {
        grid-column: span 1;
      }
      
      .button-container .button {
        width: 100%;
      }
    }
  </style>
</head>
<body>
  <div class="app-container">
    <div class="app-header">
<svg class="logo" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--!Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2025 Fonticons, Inc.-->
  <path fill="white" d="M216.6 49.9C205.1 38.5 189.5 32 173.3 32C139.4 32 112 59.4 112 93.3l0 4.9c0 12 3.3 23.7 9.4 34l18.8 31.3c1.1 1.8 1.2 3.1 1 4.2c-.2 1.2-.8 2.5-2 3.6s-2.4 1.8-3.6 2c-1 .2-2.4 .1-4.2-1l-31.3-18.8c-10.3-6.2-22-9.4-34-9.4l-4.9 0C27.4 144 0 171.4 0 205.3c0 16.2 6.5 31.8 17.9 43.3l1.2 1.2c3.4 3.4 3.4 9 0 12.4l-1.2 1.2C6.5 274.9 0 290.5 0 306.7C0 340.6 27.4 368 61.3 368l4.9 0c12 0 23.7-3.3 34-9.4l31.3-18.8c1.8-1.1 3.1-1.2 4.2-1c1.2 .2 2.5 .8 3.6 2s1.8 2.4 2 3.6c.2 1 .1 2.4-1 4.2l-18.8 31.3c-6.2 10.3-9.4 22-9.4 34l0 4.9c0 33.8 27.4 61.3 61.3 61.3c16.2 0 31.8-6.5 43.3-17.9l1.2-1.2c3.4-3.4 9-3.4 12.4 0l1.2 1.2c11.5 11.5 27.1 17.9 43.3 17.9c33.8 0 61.3-27.4 61.3-61.3l0-4.9c0-12-3.3-23.7-9.4-34l-18.8-31.3c-1.1-1.8-1.2-3.1-1-4.2c.2-1.2 .8-2.5 2-3.6s2.4-1.8 3.6-2c1-.2 2.4-.1 4.2 1l31.3 18.8c10.3 6.2 22 9.4 34 9.4l4.9 0c33.8 0 61.3-27.4 61.3-61.3c0-16.2-6.5-31.8-17.9-43.3l-1.2-1.2c-3.4-3.4-3.4-9 0-12.4l1.2-1.2c11.5-11.5 17.9-27.1 17.9-43.3c0-33.8-27.4-61.3-61.3-61.3l-4.9 0c-12 0-23.7 3.3-34 9.4l-31.3 18.8c-1.8 1.1-3.1 1.2-4.2 1c-1.2-.2-2.5-.8-3.6-2s-1.8-2.4-2-3.6c-.2-1-.1-2.4 1-4.2l18.8-31.3c6.2-10.3 9.4-22 9.4-34l0-4.9C336 59.4 308.6 32 274.7 32c-16.2 0-31.8 6.5-43.3 17.9l-1.2 1.2c-3.4 3.4-9 3.4-12.4 0l-1.2-1.2z"/>
</svg>
      <h1 class="app-title">EcoCropx</h1>
      <p class="app-subtitle">Get intelligent crop suggestions based on your location and soil data</p>
    </div>
    <div class="navbar">
      <a href="/" class="nav-link">Home</a>
    </div>
    
    
    <div class="form-container">
      <form id="cropForm">
        <div class="card">
          <div class="card-header">
            <div class="card-icon">
              <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M12 2C8.13 2 5 5.13 5 9C5 14.25 12 22 12 22C12 22 19 14.25 19 9C19 5.13 15.87 2 12 2Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                <path d="M12 11C13.1046 11 14 10.1046 14 9C14 7.89543 13.1046 7 12 7C10.8954 7 10 7.89543 10 9C10 10.1046 10.8954 11 12 11Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
              </svg>
            </div>
            <h2 class="card-title">Location Information</h2>
          </div>
          <div class="card-body">
            <div class="form-group full-width">
              <label for="city">City</label>
              <div class="input-with-icon">
                <span class="input-icon">
                  <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M12 2C8.13 2 5 5.13 5 9C5 14.25 12 22 12 22C12 22 19 14.25 19 9C19 5.13 15.87 2 12 2Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                  </svg>
                </span>
                <input type="text" id="city" placeholder="Enter your city" required oninput="getWeather()">
              </div>
            </div>
          </div>
        </div>
        
        <div class="card">
          <div class="card-header">
            <div class="card-icon">
              <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M17 8C17 10.7614 14.7614 13 12 13C9.23858 13 7 10.7614 7 8C7 5.23858 9.23858 3 12 3C14.7614 3 17 5.23858 17 8Z" stroke="currentColor" stroke-width="2"/>
                <path d="M3 21C3.95728 17.2022 7.29053 14 12 14C16.7095 14 20.0427 17.2022 21 21" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
              </svg>
            </div>
            <h2 class="card-title">Soil Nutrients</h2>
          </div>
          <div class="card-body">
            <div class="form-grid">
              <div class="form-group">
                <label for="nitrogen">
                  Nitrogen (N)
                  <span class="tooltip">
                    <span class="tooltip-icon">?</span>
                    <span class="tooltip-content">Nitrogen is essential for leaf growth and green coloration in plants.</span>
                  </span>
                </label>
                <input type="number" id="nitrogen" placeholder="Enter nitrogen value" min="0" max="140" required>
              </div>
              
              <div class="form-group">
                <label for="phosphorus">
                  Phosphorus (P)
                  <span class="tooltip">
                    <span class="tooltip-icon">?</span>
                    <span class="tooltip-content">Phosphorus promotes root growth and flower/fruit development.</span>
                  </span>
                </label>
                <input type="number" id="phosphorus" placeholder="Enter phosphorus value" min="0" max="140" required>
              </div>
              
              <div class="form-group">
                <label for="potassium">
                  Potassium (K)
                  <span class="tooltip">
                    <span class="tooltip-icon">?</span>
                    <span class="tooltip-content">Potassium helps in overall plant health and disease resistance.</span>
                  </span>
                </label>
                <input type="number" id="potassium" placeholder="Enter potassium value" min="0" max="200" required>
              </div>
              
              <div class="form-group">
                <label for="ph">
                  pH Level
                  <span class="tooltip">
                    <span class="tooltip-icon">?</span>
                    <span class="tooltip-content">pH indicates soil acidity/alkalinity. Optimal range is usually 5.5-7.5.</span>
                  </span>
                </label>
                <input type="number" id="ph" placeholder="Enter pH value" min="0" max="14" step="0.1" required>
              </div>
            </div>
          </div>
        </div>
        
        <div class="card">
          <div class="card-header">
            <div class="card-icon">
              <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M8 16.5C8 17.8807 9.11929 19 10.5 19C11.8807 19 13 17.8807 13 16.5C13 15.1193 10.5 12 10.5 12C10.5 12 8 15.1193 8 16.5Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                <path d="M5 8C5 9.65685 6.34315 11 8 11C9.65685 11 11 9.65685 11 8C11 6.34315 8 2 8 2C8 2 5 6.34315 5 8Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                <path d="M12 3C12 4.65685 13.3431 6 15 6C16.6569 6 18 4.65685 18 3C18 1.34315 15 -3 15 -3C15 -3 12 1.34315 12 3Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" transform="translate(0 5)"/>
              </svg>
            </div>
            <h2 class="card-title">Climate Data</h2>
          </div>
          <div class="card-body">
            <div class="form-grid">
              <div class="form-group">
                <label for="temperature">Temperature (Â°C)</label>
                <input type="number" id="temperature" placeholder="Average temperature" min="-20" max="50" step="0.1" required>
              </div>
              
              <div class="form-group">
                <label for="humidity">Humidity (%)</label>
                <input type="number" id="humidity" placeholder="Average humidity" min="0" max="100" required>
              </div>
              
              <div class="form-group full-width">
                <label for="rainfall">Rainfall (mm)</label>
                <input type="number" id="rainfall" placeholder="Annual rainfall" min="0" max="5000" required>
              </div>
            </div>
          </div>
        </div>
        
        <div class="button-container">
          <button type="button" class="button" onclick="submitData()">Get Crop Recommendation</button>
        </div>
      </form>
      
      <div class="loading" id="loading">
        <div class="spinner"></div>
        <p>Analyzing your data...</p>
      </div>
      
      <div class="result-container" id="resultContainer">
        <div class="result-title">Based on your inputs, we recommend:</div>
        <div class="result-value" id="result"></div>
      </div>
    </div>
  </div>
  
  <script>
    window.onload = function() {
      const params = new URLSearchParams(window.location.search);
      if (params.has('city')) {
        document.getElementById("city").value = params.get('city');
        getWeather();
      }
    };
    
    async function getWeather() {
      let city = document.getElementById("city").value;
      if (city.length < 3) return;
      
      const apiKey = "233a169eca4c3d30d93928de0883ee9a";
      const url = `https://api.openweathermap.org/data/2.5/weather?q=${city}&appid=${apiKey}&units=metric`;
      
      try {
        let response = await fetch(url);
        let data = await response.json();
        if (data.main) {
          document.getElementById("temperature").value = data.main.temp;
          document.getElementById("humidity").value = data.main.humidity;
        } else {
          console.error("City not found");
        }
      } catch (error) {
        console.error("Error fetching weather data:", error);
      }
    }
    
    function submitData() {
      // Validate inputs
      const form = document.getElementById("cropForm");
      const inputs = form.querySelectorAll("input");
      let isValid = true;
      
      inputs.forEach(input => {
        if (!input.value) {
          input.style.borderColor = "var(--error)";
          isValid = false;
        } else {
          input.style.borderColor = "var(--gray-300)";
        }
      });
      
      if (!isValid) {
        alert("Please fill in all required fields.");
        return;
      }
      
      // Show loading
      document.getElementById("loading").classList.add("visible");
      document.getElementById("resultContainer").classList.remove("visible");
      
      let data = {
        city: document.getElementById("city").value,
        temperature: document.getElementById("temperature").value,
        humidity: document.getElementById("humidity").value,
        nitrogen: document.getElementById("nitrogen").value,
        phosphorus: document.getElementById("phosphorus").value,
        potassium: document.getElementById("potassium").value,
        ph: document.getElementById("ph").value,
        rainfall: document.getElementById("rainfall").value
      };
      
      fetch("http://127.0.0.1:5000/predict_crop", {
        method: "POST",
        headers: {
          "Content-Type": "application/json"
        },
        body: JSON.stringify(data)
      })
      .then(response => response.json())
      .then(data => {
        // Hide loading
        document.getElementById("loading").classList.remove("visible");
        
        // Show result
        document.getElementById("result").innerText = data.suggested_crop;
        document.getElementById("resultContainer").classList.add("visible");
        
        // Scroll to result
        document.getElementById("resultContainer").scrollIntoView({
          behavior: 'smooth'
        });
      })
      .catch(error => {
        console.error("Error:", error);
        document.getElementById("loading").classList.remove("visible");
        alert("An error occurred. Please try again.");
      });
    }
  </script>
</body>
</html>